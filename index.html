<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Informatique avec JUSWELL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --primary:#1453ff;
      --bg:#f7fafc;
      --text:#111827;
      --glass:rgba(20,83,255,0.12);
      --glass-border:rgba(20,83,255,0.18);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Arial,sans-serif;background:var(--bg);color:var(--text);}
    header{background:var(--primary);color:#fff;padding:12px;display:flex;align-items:center;justify-content:space-between;}
    .menu-btn{display:flex;align-items:center;gap:10px;cursor:pointer;}
    .menu-lines{display:flex;flex-direction:column;gap:4px;}
    .menu-lines div{width:26px;height:3px;background:#fff;border-radius:2px;}
    .menu-label{font-weight:700;}
    .top-right{display:flex;flex-direction:column;align-items:flex-end;}
    .top-right a{color:#fff;text-decoration:none;font-weight:700;}
    .top-right a+a{margin-top:4px;}
    nav#menu{display:none;background:var(--primary);color:#fff;padding:10px 12px;}
    nav#menu a{display:block;color:#fff;text-decoration:none;padding:8px 0;border-bottom:1px solid rgba(255,255,255,.2);}
    nav#menu a:last-child{border-bottom:none;}
    .container{max-width:1000px;margin:20px auto;padding:0 12px;}
    h1{color:var(--primary);}
    .card{background:var(--glass);border:1px solid var(--glass-border);border-radius:12px;padding:16px;margin:12px 0;}
    .muted{color:#6b7280;font-size:14px;}
    .image-landscape img{width:100%;border-radius:12px;display:block;}
    .hidden{display:none!important;}
    footer{background:var(--primary);color:#fff;padding:12px;text-align:center;margin-top:30px;}
    .error{color:#b91c1c;font-weight:700;}
    input,select{width:100%;padding:10px;margin:6px 0;border:1px solid #cbd5e1;border-radius:8px;}
    button{background:var(--primary);color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;}
    button.secondary{background:#e5e7eb;color:#111;}
    .row{display:flex;gap:12px;flex-wrap:wrap;}
    .row > *{flex:1 1 240px;}
    .small-input{flex:0 0 90px;text-align:center;}
    ul{margin:0;padding-left:18px;}
  </style>
</head>
<body>
  <header>
    <div class="menu-btn" onclick="toggleMenu()">
      <div class="menu-lines"><div></div><div></div><div></div></div>
      <span class="menu-label">Menu</span>
    </div>
    <div id="top-right" class="top-right">
      <a href="#" onclick="go('register-step1')">S’inscrire</a>
      <a href="#" onclick="go('login')">Se connecter</a>
    </div>
  </header>

  <nav id="menu">
    <a href="#" onclick="go('home')">Accueil</a>
    <a href="#" onclick="go('dashboard')">Tableau de bord</a>
    <a href="#" onclick="go('admin-login')">Espace administrateur</a>
    <a href="#" onclick="logout()">Se déconnecter</a>
    <a href="#" onclick="go('privacy')">Confidentialité</a>
  </nav>

  <main class="container">
    <!-- Accueil -->
    <section id="home" class="page">
      <h1>Informatique avec JUSWELL</h1>
      <p class="muted">Bienvenue sur notre site de formation. Choisissez votre niveau et progressez à votre rythme.</p>

      <div class="image-landscape card">
        <img src="https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1200&auto=format&fit=crop" alt="Ordinateur avec logiciels et réseau informatique">
      </div>

      <h2>Niveaux de formation</h2>
      <div class="card">
        <h3>Débutant</h3>
        <p>Premiers pas: utilisation de base, bureautique, internet.</p>
        <button onclick="openClass('DEB')">Voir la classe</button>
      </div>
      <div class="card">
        <h3>Moyen</h3>
        <p>Approfondissement: Excel avancé, programmation, réseaux.</p>
        <button onclick="openClass('MOY')">Voir la classe</button>
      </div>
      <div class="card">
        <h3>Avancé</h3>
        <p>Projets complets: développement web, bases de données, sécurité.</p>
        <button onclick="openClass('AVA')">Voir la classe</button>
      </div>
    </section>

    <!-- Inscription — Étape 1 -->
    <section id="register-step1" class="page hidden">
      <h2>Inscription — Étape 1</h2>
      <div class="card">
        <label>Nom</label><input id="r_last" placeholder="Ex: Kossi">
        <label>Prénom</label><input id="r_first" placeholder="Ex: Ama">
        <label>Email</label><input id="r_email" type="email" placeholder="exemple@mail.com">
        <label>Téléphone</label>
        <div class="row">
          <input id="r_phone_code" class="small-input" placeholder="+228">
          <input id="r_phone" type="tel" placeholder="92239333">
        </div>
        <label>Ville</label><input id="r_city" placeholder="Ex: Kpalimé">
        <label>Pays</label><input id="r_country" placeholder="Ex: Togo">
        <div class="row">
          <button onclick="nextStep(1)">Suivant</button>
          <button class="secondary" onclick="go('home')">Annuler</button>
        </div>
      </div>
    </section>

    <!-- Inscription — Étape 2 -->
    <section id="register-step2" class="page hidden">
      <h2>Inscription — Étape 2</h2>
      <div class="card">
        <label>Niveau d’étude</label>
        <select id="r_study">
          <option>CEPD</option><option>BEPC</option><option>BAC1</option><option>BAC2</option><option>Licence</option>
        </select>
        <label>Profession</label><input id="r_job" placeholder="Ex: Étudiant, Enseignant, ...">
        <label>Niveau informatique</label>
        <select id="r_it"><option>Débutant</option><option>Moyen</option><option>Avancé</option></select>
        <label>Niveau de formation (classe)</label>
        <select id="r_training"><option value="DEB">Débutant</option><option value="MOY">Moyen</option><option value="AVA">Avancé</option></select>
        <div class="row">
          <button onclick="nextStep(2)">Suivant</button>
          <button class="secondary" onclick="go('register-step1')">Précédent</button>
        </div>
      </div>
    </section>

    <!-- Inscription — Étape 3 -->
    <section id="register-step3" class="page hidden">
      <h2>Inscription — Étape 3 (Paiement simulé)</h2>
      <div class="card">
        <label><input type="checkbox" id="r_confirm"> Je confirme le paiement</label>
        <div class="row">
          <button onclick="finishRegister()">Terminer</button>
          <button class="secondary" onclick="go('register-step2')">Précédent</button>
        </div>
        <p class="muted">Après confirmation, un code vous sera affiché. Utilisez-le pour vous connecter.</p>
      </div>
    </section>

    <!-- Connexion -->
    <section id="login" class="page hidden">
      <h2>Se connecter</h2>
      <div class="card">
        <label>Email</label><input id="l_email" type="email" placeholder="exemple@mail.com">
        <label>Code reçu</label><input id="l_code" placeholder="Ex: D-123456, M-123456, A-123456">
        <div class="row">
          <button onclick="login()">Se connecter</button>
          <button class="secondary" onclick="go('home')">Annuler</button>
        </div>
        <p id="login-error" class="error hidden">Email ou code incorrect.</p>
      </div>
    </section>

    <!-- Classe protégée -->
    <section id="class-page" class="page hidden">
      <h2 id="class-title">Classe</h2>
      <div class="card" id="class-content"></div>
      <div class="row">
        <button class="secondary" onclick="go('home')">Retour</button>
        <button onclick="go('dashboard')">Aller au tableau de bord</button>
      </div>
    </section>

    <!-- Tableau de bord -->
    <section id="dashboard" class="page hidden">
      <h2>Tableau de bord</h2>
      <div class="card">
        <p>Les cours publiés par l’administrateur s’affichent ci-dessous, groupés par classe.</p>
      </div>
      <div id="dashboard-courses" class="card"></div>
    </section>

    <!-- Confidentialité -->
    <section id="privacy" class="page hidden">
      <h2>Politique de confidentialité</h2>
      <div class="card">
        <p>Sur ce site statique, les données restent sur votre appareil (stockage local). Aucune information n’est partagée à des tiers.</p>
      </div>
    </section>

    <!-- Admin: login -->
    <section id="admin-login" class="page hidden">
      <h2>Espace administrateur</h2>
      <div class="card">
        <label>Code d’accès (admin)</label>
        <input type="password" id="admin-code" placeholder="Entrer le code (gsm)">
        <div class="row">
          <button onclick="checkAdmin()">Entrer</button>
          <button class="secondary" onclick="go('home')">Retour</button>
        </div>
        <p id="admin-error" class="error hidden">Code incorrect.</p>
      </div>
    </section>

    <!-- Admin: panel -->
    <section id="admin-panel" class="page hidden">
      <h2>Tableau de bord Admin</h2>
      <div class="card">
        <p>Ajoutez des cours par classe et consultez les inscrits.</p>
      </div>

      <div class="card">
        <h3>Ajouter un cours</h3>
        <div class="row">
          <input type="text" id="course-title" placeholder="Ex: Initiation à Excel">
          <select id="course-class">
            <option value="DEB">Débutant</option>
            <option value="MOY">Moyen</option>
            <option value="AVA">Avancé</option>
          </select>
        </div>
        <button onclick="addCourse()">Ajouter le cours</button>
      </div>

      <div class="card">
        <h3>Cours existants</h3>
        <div id="admin-courses"></div>
      </div>

      <div class="card">
        <h3>Liste des inscrits</h3>
        <p class="muted">Les inscriptions via le formulaire ajoutent automatiquement l’élève ici.</p>
        <div class="row">
          <input type="text" id="student-name" placeholder="Nom complet">
          <select id="student-class">
            <option value="DEB">Débutant</option>
            <option value="MOY">Moyen</option>
            <option value="AVA">Avancé</option>
          </select>
          <button onclick="addStudent()">Ajouter un inscrit (simulation)</button>
        </div>
        <div id="admin-users" style="margin-top:10px;"></div>
      </div>
    </section>
  </main>

  <footer>
    <p>Contact : +228 92 23 93 33 · tenteessaie@gmail.com</p>
    <p>&copy; 2025 Informatique avec JUSWELL</p>
  </footer>

  <script>
    // Utilitaires de stockage local
    function load(key, def=[]){ try{ const v=JSON.parse(localStorage.getItem(key)); return v ?? def; }catch(e){ return def; } }
    function save(key, val){ localStorage.setItem(key, JSON.stringify(val)); }

    // État pour classe demandée avant login
    let pendingClass = null;

    // Navigation
    function toggleMenu(){
      const m=document.getElementById('menu');
      m.style.display=(m.style.display==='block')?'none':'block';
    }
    function go(id){
      document.querySelectorAll('.page').forEach(p=>p.classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
      document.getElementById('top-right').style.display=(id==='home')?'flex':'none';
      document.getElementById('menu').style.display='none';
      if(id==='dashboard'){ renderDashboard(); }
      if(id==='admin-panel'){ renderAdmin(); }
    }

    // Inscription étapes
    function nextStep(step){
      if(step===1){
        const last=document.getElementById('r_last').value.trim();
        const first=document.getElementById('r_first').value.trim();
        const email=document.getElementById('r_email').value.trim();
        const phoneCode=document.getElementById('r_phone_code').value.trim();
        const phone=document.getElementById('r_phone').value.trim();
        const city=document.getElementById('r_city').value.trim();
        const country=document.getElementById('r_country').value.trim();
        if(!last || !first || !email || !phoneCode || !phone || !city || !country){
          alert('Veuillez remplir tous les champs de l’étape 1.');
          return;
        }
        save('register_tmp',{last,first,email,phoneCode,phone,city,country});
        go('register-step2');
      }else if(step===2){
        const study=document.getElementById('r_study').value;
        const job=document.getElementById('r_job').value.trim();
        const it=document.getElementById('r_it').value;
        const training=document.getElementById('r_training').value; // DEB/MOY/AVA
        const tmp=load('register_tmp',null);
        if(!tmp){ alert('Veuillez reprendre à l’étape 1.'); return; }
        save('register_tmp',{...tmp,study,job,it,training});
        go('register-step3');
      }
    }
    function finishRegister(){
      if(!document.getElementById('r_confirm').checked){
        alert('Veuillez confirmer le paiement.'); return;
      }
      const data=load('register_tmp',null);
      if(!data){ alert('Inscription incomplète.'); return; }
      // Préfixe du code selon la classe
      const prefixMap={ DEB:'D', MOY:'M', AVA:'A' };
      const prefix = prefixMap[data.training] || 'D';
      const code = prefix + '-' + Math.floor(100000 + Math.random()*900000);
      const fullName = data.first + ' ' + data.last;

      // Ajout automatique dans la liste des inscrits
      const list = load('students');
      list.push({
        name: fullName,
        email: data.email,
        cls: data.training,
        code: code,
        phoneCode: data.phoneCode,
        phone: data.phone,
        city: data.city,
        country: data.country
      });
      save('students', list);

      // Session utilisateur
      save('current_user', {
        email: data.email,
        code: code,
        cls: data.training,
        name: fullName
      });

      alert('Inscription terminée. Votre code: ' + code);
      localStorage.removeItem('register_tmp');
      go('login');
    }

    // Connexion
    function login(){
      const email=document.getElementById('l_email').value.trim();
      const code=document.getElementById('l_code').value.trim();
      const students=load('students');
      const user=students.find(s=>s.email===email && s.code===code);
      if(!user){
        document.getElementById('login-error').classList.remove('hidden');
        return;
      }
      document.getElementById('login-error').classList.add('hidden');
      save('current_user', user);
      alert('Connexion réussie.');
      if(pendingClass){
        openClass(pendingClass);
        pendingClass=null;
      }else{
        go('dashboard');
      }
    }

    // Protection des classes (accès strict à la classe inscrite)
    function openClass(cls){
      const user = load('current_user', null);
      if(!user){
        pendingClass = cls;
        alert('Veuillez vous connecter pour accéder à la classe.');
        go('login');
        return;
      }
      if(user.cls !== cls){
        alert("Accès refusé : vous n'êtes pas inscrit pour cette classe.");
        return;
      }
      showClass(cls);
    }

    // Affichage classe
    function showClass(cls){
      const titleMap = { DEB:'Classe Débutant', MOY:'Classe Moyen', AVA:'Classe Avancé' };
      document.getElementById('class-title').textContent = titleMap[cls] || 'Classe';
      const courses = load('courses').filter(c=>c.cls===cls);
      const content = document.getElementById('class-content');
      if(courses.length===0){
        content.innerHTML = '<p class="muted">Aucun cours publié pour cette classe pour le moment.</p>';
      }else{
        content.innerHTML = '<ul>' + courses.map(c=>`<li>${c.title}</li>`).join('') + '</ul>';
      }
      go('class-page');
    }

    // Déconnexion
    function logout(){
      localStorage.removeItem('current_user');
      alert('Déconnecté.');
      go('home');
    }

    // Admin: accès par code gsm
    function checkAdmin(){
      const code=document.getElementById('admin-code').value.trim();
      if(code==='gsm'){
        document.getElementById('admin-error').classList.add('hidden');
        go('admin-panel');
        renderAdmin();
      }else{
        document.getElementById('admin-error').classList.remove('hidden');
      }
    }

    // Admin: ajouter cours
    function addCourse(){
      const title=document.getElementById('course-title').value.trim();
      const cls=document.getElementById('course-class').value;
      if(!title){ alert('Veuillez entrer un titre.'); return; }
      const courses=load('courses');
      courses.push({ title, cls });
      save('courses', courses);
      document.getElementById('course-title').value='';
      renderAdmin();
      alert('Cours ajouté.');
    }

    // Admin: ajouter inscrit (simulation)
    function addStudent(){
      const name=document.getElementById('student-name').value.trim();
      const cls=document.getElementById('student-class').value;
      if(!name){ alert('Veuillez entrer un nom.'); return; }
      const students=load('students');
      students.push({ name, email:'', cls, code:'' });
      save('students', students);
      document.getElementById('student-name').value='';
      renderAdmin();
    }

    // Admin: affichage cours et inscrits
    function renderAdmin(){
      const courses=load('courses');
      const byClass={ DEB:[], MOY:[], AVA:[] };
      courses.forEach(c=>byClass[c.cls].push(c.title));
      document.getElementById('admin-courses').innerHTML = `
        <div class="card"><strong>Débutant:</strong> ${byClass.DEB.join(', ') || '—'}</div>
        <div class="card"><strong>Moyen:</strong> ${byClass.MOY.join(', ') || '—'}</div>
        <div class="card"><strong>Avancé:</strong> ${byClass.AVA.join(', ') || '—'}</div>
      `;
      const students=load('students');
      const counts={DEB:0,MOY:0,AVA:0};
      students.forEach(s=>{ if(counts[s.cls]!=null) counts[s.cls]++; });
      const wrap=document.getElementById('admin-users');
      wrap.innerHTML = `
        <div class="row" style="margin-bottom:8px;">
          <button onclick="filterUsers('ALL')">Tous</button>
          <button onclick="filterUsers('DEB')">Débutant (${counts.DEB})</button>
          <button onclick="filterUsers('MOY')">Moyen (${counts.MOY})</button>
          <button onclick="filterUsers('AVA')">Avancé (${counts.AVA})</button>
        </div>
        <ul id="users-list"></ul>
      `;
      renderUsersList('ALL');
    }
    function renderUsersList(filter){
      const students=load('students');
      const ul=document.getElementById('users-list');
      ul.innerHTML='';
      const filtered=students.filter(s=>filter==='ALL'?true:s.cls===filter);
      if(filtered.length===0){
        ul.innerHTML='<li class="muted">Aucun inscrit pour ce filtre.</li>';
      }else{
        filtered.forEach(s=>{
          const clsLabel = s.cls==='DEB'?'Débutant':(s.cls==='MOY'?'Moyen':'Avancé');
          const li=document.createElement('li');
          li.innerHTML = `<strong>${s.name || '(Sans nom)'}</strong> — ${clsLabel}`;
          ul.appendChild(li);
        });
      }
    }
    function filterUsers(cls){ renderUsersList(cls); }

    // Tableau de bord: aperçu des cours
    function renderDashboard(){
      const courses=load('courses');
      const box=document.getElementById('dashboard-courses');
      if(courses.length===0){
        box.innerHTML='<p class="muted">Aucun cours publié pour l’instant.</p>'; return;
      }
      const groups={DEB:[],MOY:[],AVA:[]};
      courses.forEach(c=>groups[c.cls].push(c.title));
      box.innerHTML = `
        <div class="card"><strong>Débutant:</strong> ${groups.DEB.join(', ') || '—'}</div>
        <div class="card"><strong>Moyen:</strong> ${groups.MOY.join(', ') || '—'}</div>
        <div class="card"><strong>Avancé:</strong> ${groups.AVA.join(', ') || '—'}</div>
      `;
    }

    // Initialisation
    go('home');
  </script>
</body>
</html>
